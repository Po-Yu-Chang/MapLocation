<?xml version="1.0" encoding="utf-8" ?>
<ContentPage x:Class="MapLocationApp.Views.SettingsPage"
             xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             Title="Ë®≠ÂÆö"
             Style="{StaticResource DarkPageStyle}">

    <ContentPage.Resources>
        <ResourceDictionary Source="../Resources/Styles/DarkTheme.xaml" />
    </ContentPage.Resources>

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="20">
            
            <!-- È†ÅÈù¢Ê®ôÈ°å -->
            <Label Text="ÊáâÁî®Á®ãÂºèË®≠ÂÆö" Style="{StaticResource TitleLabelStyle}"/>

            <!-- Ë™ûË®ÄË®≠ÂÆöÂç°Áâá -->
            <Frame Style="{StaticResource CardFrameStyle}">
                <VerticalStackLayout Spacing="16">
                    <HorizontalStackLayout Spacing="12">
                        <Label Text="üåç" FontSize="24"/>
                        <Label Text="Ë™ûË®ÄË®≠ÂÆö" Style="{StaticResource LabelStyle}" FontSize="18" FontAttributes="Bold"/>
                    </HorizontalStackLayout>
                    
                    <VerticalStackLayout Spacing="12">
                        <Label Text="ÈÅ∏ÊìáÊáâÁî®Á®ãÂºèË™ûË®Ä" Style="{StaticResource LabelStyle}"/>
                        <Picker x:Name="LanguagePicker"
                                BackgroundColor="{StaticResource DarkSecondaryColor}"
                                TextColor="{StaticResource WhiteTextColor}"
                                TitleColor="{StaticResource GrayTextColor}"
                                SelectedIndexChanged="OnLanguageChanged">
                            <Picker.Items>
                                <x:String>ÁπÅÈ´î‰∏≠Êñá (Traditional Chinese)</x:String>
                                <x:String>ÁÆÄ‰Ωì‰∏≠Êñá (Simplified Chinese)</x:String>
                                <x:String>English</x:String>
                                <x:String>Êó•Êú¨Ë™û (Japanese)</x:String>
                                <x:String>ÌïúÍµ≠Ïñ¥ (Korean)</x:String>
                            </Picker.Items>
                        </Picker>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- ‰∏ªÈ°åË®≠ÂÆöÂç°Áâá -->
            <Frame Style="{StaticResource CardFrameStyle}">
                <VerticalStackLayout Spacing="16">
                    <HorizontalStackLayout Spacing="12">
                        <Label Text="üé®" FontSize="24"/>
                        <Label Text="‰∏ªÈ°åË®≠ÂÆö" Style="{StaticResource LabelStyle}" FontSize="18" FontAttributes="Bold"/>
                    </HorizontalStackLayout>
                    
                    <VerticalStackLayout Spacing="12">
                        <Label Text="ÈÅ∏ÊìáÂ§ñËßÄ‰∏ªÈ°å" Style="{StaticResource LabelStyle}"/>
                        <Picker x:Name="ThemePicker"
                                BackgroundColor="{StaticResource DarkSecondaryColor}"
                                TextColor="{StaticResource WhiteTextColor}"
                                TitleColor="{StaticResource GrayTextColor}"
                                SelectedIndexChanged="OnThemeChanged">
                            <Picker.Items>
                                <x:String>üåû Ê∑∫Ëâ≤Ê®°Âºè</x:String>
                                <x:String>üåô Ê∑±Ëâ≤Ê®°Âºè</x:String>
                                <x:String>üîÑ Ëá™Âãï (Ë∑üÈö®Á≥ªÁµ±)</x:String>
                            </Picker.Items>
                        </Picker>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- ‰ΩçÁΩÆË®≠ÂÆöÂç°Áâá -->
            <Frame Style="{StaticResource CardFrameStyle}">
                <VerticalStackLayout Spacing="16">
                    <HorizontalStackLayout Spacing="12">
                        <Label Text="üìç" FontSize="24"/>
                        <Label Text="‰ΩçÁΩÆÊúçÂãô" Style="{StaticResource LabelStyle}" FontSize="18" FontAttributes="Bold"/>
                    </HorizontalStackLayout>
                    
                    <VerticalStackLayout Spacing="12">
                        <HorizontalStackLayout>
                            <Label Text="ÂïüÁî®È´òÁ≤æÂ∫¶ÂÆö‰Ωç" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Switch x:Name="HighAccuracySwitch" 
                                    Style="{StaticResource DarkSwitchStyle}" 
                                    HorizontalOptions="EndAndExpand" 
                                    Toggled="OnHighAccuracyToggled"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout>
                            <Label Text="ËÉåÊôØ‰ΩçÁΩÆÊõ¥Êñ∞" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Switch x:Name="BackgroundLocationSwitch" 
                                    Style="{StaticResource DarkSwitchStyle}" 
                                    HorizontalOptions="EndAndExpand" 
                                    Toggled="OnBackgroundLocationToggled"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout>
                            <Label Text="Ëá™ÂãïÂú∞ÁêÜÂúçÊ¨ÑÊ™¢Ê∏¨" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Switch x:Name="GeofenceDetectionSwitch" 
                                    Style="{StaticResource DarkSwitchStyle}" 
                                    HorizontalOptions="EndAndExpand" 
                                    Toggled="OnGeofenceDetectionToggled"/>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- ÈÄöÁü•Ë®≠ÂÆöÂç°Áâá -->
            <Frame Style="{StaticResource CardFrameStyle}">
                <VerticalStackLayout Spacing="16">
                    <HorizontalStackLayout Spacing="12">
                        <Label Text="üîî" FontSize="24"/>
                        <Label Text="ÈÄöÁü•Ë®≠ÂÆö" Style="{StaticResource LabelStyle}" FontSize="18" FontAttributes="Bold"/>
                    </HorizontalStackLayout>
                    
                    <VerticalStackLayout Spacing="12">
                        <HorizontalStackLayout>
                            <Label Text="ÊâìÂç°ÊèêÈÜí" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Switch x:Name="CheckInNotificationSwitch" 
                                    Style="{StaticResource DarkSwitchStyle}" 
                                    HorizontalOptions="EndAndExpand" 
                                    Toggled="OnCheckInNotificationToggled"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout>
                            <Label Text="Âú∞ÁêÜÂúçÊ¨ÑÈÄ≤Âá∫ÈÄöÁü•" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Switch x:Name="GeofenceNotificationSwitch" 
                                    Style="{StaticResource DarkSwitchStyle}" 
                                    HorizontalOptions="EndAndExpand" 
                                    Toggled="OnGeofenceNotificationToggled"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout>
                            <Label Text="ÂúòÈöä‰ΩçÁΩÆÂàÜ‰∫´ÈÄöÁü•" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Switch x:Name="TeamNotificationSwitch" 
                                    Style="{StaticResource DarkSwitchStyle}" 
                                    HorizontalOptions="EndAndExpand" 
                                    Toggled="OnTeamNotificationToggled"/>
                        </HorizontalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Telegram Êé®Êí≠ÈÄöÁü•Ë®≠ÂÆöÂç°Áâá -->
            <Frame Style="{StaticResource CardFrameStyle}">
                <VerticalStackLayout Spacing="16">
                    <HorizontalStackLayout Spacing="12">
                        <Label Text="üì±" FontSize="24"/>
                        <Label Text="Telegram Êé®Êí≠ÈÄöÁü•" Style="{StaticResource LabelStyle}" FontSize="18" FontAttributes="Bold"/>
                    </HorizontalStackLayout>
                    
                    <VerticalStackLayout Spacing="12">
                        <HorizontalStackLayout>
                            <Label Text="ÂïüÁî® Telegram ÈÄöÁü•" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Switch x:Name="TelegramEnabledSwitch" 
                                    Style="{StaticResource DarkSwitchStyle}" 
                                    HorizontalOptions="EndAndExpand" 
                                    Toggled="OnTelegramEnabledToggled"/>
                        </HorizontalStackLayout>
                        
                        <VerticalStackLayout x:Name="TelegramConfigLayout" Spacing="12" IsVisible="False">
                            <Label Text="Ê©üÂô®‰∫∫Ë®≠ÂÆö" Style="{StaticResource LabelStyle}" FontAttributes="Bold"/>
                            
                            <Entry x:Name="TelegramBotTokenEntry"
                                   Placeholder="Ëº∏ÂÖ• Telegram Bot Token"
                                   IsPassword="True"
                                   Style="{StaticResource DarkEntryStyle}"/>
                            
                            <Entry x:Name="TelegramChatIdEntry"
                                   Placeholder="Ëº∏ÂÖ• Chat ID Êàñ @È†ªÈÅìÂêçÁ®±"
                                   Style="{StaticResource DarkEntryStyle}"/>
                            
                            <Label Text="üìù Ë®≠ÂÆöË™™ÊòéÔºö" Style="{StaticResource LabelStyle}" FontAttributes="Bold"/>
                            <Label Text="1. Âú® Telegram ÊêúÂ∞ã @BotFather ‚Üí /start ‚Üí /newbot Âª∫Á´ãÊ©üÂô®‰∫∫" Style="{StaticResource SmallLabelStyle}"/>
                            <Label Text="2. ÂèñÂæó Bot TokenÔºàÂΩ¢Â¶Ç 123456789:AA...Ôºâ" Style="{StaticResource SmallLabelStyle}"/>
                            <Label Text="3. ËÆì Bot ËÉΩÂÇ≥Ë®äÊÅØÁµ¶ÊÇ®Ôºö" Style="{StaticResource SmallLabelStyle}"/>
                            <Label Text="   ‚Ä¢ ÂÄã‰∫∫ÔºöÊêúÂ∞ãÊÇ®ÁöÑ Bot ÂêçÁ®±ÔºåÊåâ Start" Style="{StaticResource SmallLabelStyle}" Margin="15,0,0,0"/>
                            <Label Text="   ‚Ä¢ Áæ§ÁµÑÔºöÊää Bot Âä†ÈÄ≤Áæ§ÁµÑÔºåÁµ¶‰ªñÊ¨äÈôê" Style="{StaticResource SmallLabelStyle}" Margin="15,0,0,0"/>
                            <Label Text="   ‚Ä¢ È†ªÈÅìÔºöÊää Bot Âä†ÈÄ≤È†ªÈÅì‰∏¶Ë®≠ÁÇ∫ÁÆ°ÁêÜÂì°" Style="{StaticResource SmallLabelStyle}" Margin="15,0,0,0"/>
                            <Label Text="4. ÂèñÂæó Chat IDÔºö" Style="{StaticResource SmallLabelStyle}"/>
                            <Label Text="   ‚Ä¢ ÈñãÁÄèË¶ΩÂô® GET: https://api.telegram.org/bot&lt;YOUR_BOT_TOKEN&gt;/getUpdates" Style="{StaticResource SmallLabelStyle}" Margin="15,0,0,0"/>
                            <Label Text="   ‚Ä¢ ÊâæÂà∞ message.chat.idÔºàÁæ§ÁµÑ/È†ªÈÅìÈÄöÂ∏∏ÊòØË≤†Êï∏Ôºâ" Style="{StaticResource SmallLabelStyle}" Margin="15,0,0,0"/>
                            
                            <Grid ColumnDefinitions="*,*" ColumnSpacing="12" Margin="0,10,0,0">
                                <Button Grid.Column="0"
                                        x:Name="TelegramTestButton"
                                        Text="üß™ Ê∏¨Ë©¶ÈÄ£Á∑ö"
                                        Style="{StaticResource SecondaryButtonStyle}"
                                        Clicked="OnTelegramTestClicked"/>
                                
                                <Button Grid.Column="1"
                                        x:Name="TelegramSaveButton"
                                        Text="üíæ ÂÑ≤Â≠òË®≠ÂÆö"
                                        Style="{StaticResource PrimaryButtonStyle}"
                                        Clicked="OnTelegramSaveClicked"/>
                            </Grid>
                            
                            <Label x:Name="TelegramStatusLabel"
                                   Text="üì° ÁãÄÊÖã: Êú™Ë®≠ÂÆö"
                                   Style="{StaticResource SmallLabelStyle}"
                                   Margin="0,5,0,0"/>
                        </VerticalStackLayout>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- Ë≥áÊñôÁÆ°ÁêÜÂç°Áâá -->
            <Frame Style="{StaticResource CardFrameStyle}">
                <VerticalStackLayout Spacing="16">
                    <HorizontalStackLayout Spacing="12">
                        <Label Text="üíæ" FontSize="24"/>
                        <Label Text="Ë≥áÊñôÁÆ°ÁêÜ" Style="{StaticResource LabelStyle}" FontSize="18" FontAttributes="Bold"/>
                    </HorizontalStackLayout>
                    
                    <VerticalStackLayout Spacing="12">
                        <Grid ColumnDefinitions="*,*" ColumnSpacing="12">
                            <Button Grid.Column="0"
                                    Text="üì§ ÂåØÂá∫Ë≥áÊñô"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Clicked="OnExportDataClicked"/>
                            
                            <Button Grid.Column="1"
                                    Text="üì• ÂåØÂÖ•Ë≥áÊñô"
                                    Style="{StaticResource SecondaryButtonStyle}"
                                    Clicked="OnImportDataClicked"/>
                        </Grid>
                        
                        <Button Text="üóëÔ∏è Ê∏ÖÈô§Âø´Âèñ"
                                Style="{StaticResource WarningButtonStyle}"
                                Clicked="OnClearCacheClicked"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

            <!-- ÈóúÊñºË≥áË®äÂç°Áâá -->
            <Frame Style="{StaticResource CardFrameStyle}">
                <VerticalStackLayout Spacing="16">
                    <HorizontalStackLayout Spacing="12">
                        <Label Text="‚ÑπÔ∏è" FontSize="24"/>
                        <Label Text="ÊáâÁî®Á®ãÂºèË≥áË®ä" Style="{StaticResource LabelStyle}" FontSize="18" FontAttributes="Bold"/>
                    </HorizontalStackLayout>
                    
                    <VerticalStackLayout Spacing="8">
                        <HorizontalStackLayout>
                            <Label Text="ÁâàÊú¨:" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Label Text="1.0.0" Style="{StaticResource LabelStyle}" FontAttributes="Bold" HorizontalOptions="EndAndExpand"/>
                        </HorizontalStackLayout>
                        
                        <HorizontalStackLayout>
                            <Label Text="Âª∫ÁΩÆ:" Style="{StaticResource LabelStyle}" VerticalOptions="Center"/>
                            <Label Text="20241201" Style="{StaticResource LabelStyle}" FontAttributes="Bold" HorizontalOptions="EndAndExpand"/>
                        </HorizontalStackLayout>
                        
                        <Button Text="üìÑ Êü•ÁúãÈö±ÁßÅÊîøÁ≠ñ"
                                Style="{StaticResource SecondaryButtonStyle}"
                                Clicked="OnPrivacyPolicyClicked"/>
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Frame>

        </VerticalStackLayout>
    </ScrollView>

</ContentPage>